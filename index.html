<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>sedna FM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(ellipse at center, #3a3d43 0%, #23252a 100%);
      font-family: 'Courier New', Courier, monospace;
      color: #fff;
      overflow-x: hidden;
      /* Subtle noise overlay for texture */
      position: relative;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0; width: 100vw; height: 100vh;
      pointer-events: none;
      opacity: 0.18;
      z-index: 0;
      background: url('https://www.transparenttextures.com/patterns/diamond-upholstery.png');
      /* fallback: subtle noise pattern */
    }
    .nav-bar {
      width: 100vw;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 32px 24px 0 24px;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 10;
    }
    .nav-left {
      display: flex;
      gap: 2rem;
      font-size: 1.2rem;
    }
    .nav-left a {
      color: #fff;
      text-decoration: none;
      opacity: 0.85;
      transition: opacity 0.2s;
    }
    .nav-left a:hover {
      opacity: 1;
      text-decoration: underline;
    }
    .site-title {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'Dancing Script', cursive, sans-serif;
      font-size: 2rem;
      letter-spacing: 0.1em;
      opacity: 0.9;
      top: 32px;
    }
    .nav-right {
      display: flex;
      gap: 1.2rem;
      font-size: 1.7rem;
      align-items: center;
      position: relative;
      z-index: 20;
      background: rgba(35, 37, 42, 0.85);
      padding: 6px 12px;
      border-radius: 16px;
      box-shadow: 0 2px 8px #0004;
      margin-right: 32px;
    }
    .nav-right a {
      color: #fff;
      opacity: 0.9;
      transition: opacity 0.2s;
      text-decoration: none;
      padding: 4px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .nav-right a:hover {
      opacity: 1;
      background: #ff5500;
      color: #fff;
    }
    #radio-hero {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    #radio-label {
      margin-top: 20px;
      font-size: 2rem;
      color: #fff;
      letter-spacing: 0.1em;
      text-shadow: 0 2px 8px #0008;
    }
    #soundcloud-player {
      margin-top: 32px;
      display: block;
      width: 100%;
      max-width: 500px;
      min-height: 0;
      height: 0;
      overflow: hidden;
      position: absolute;
      left: -9999px;
      top: -9999px;
      pointer-events: none;
      opacity: 0;
    }
  </style>
  <style>
    /* Modal styles */
    .modal-overlay {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(30, 32, 36, 0.85);
      justify-content: center;
      align-items: center;
    }
    .modal-overlay.active {
      display: flex;
    }
    .modal-window {
      background: #23252a;
      border-radius: 14px;
      box-shadow: 0 4px 32px #000b;
      padding: 32px 28px 24px 28px;
      min-width: 320px;
      max-width: 94vw;
      color: #fff;
      position: relative;
      font-family: 'Courier New', Courier, monospace;
      animation: modalIn 0.18s cubic-bezier(.4,2,.6,1) both;
    }
    @keyframes modalIn {
      from { transform: translateY(40px) scale(0.98); opacity: 0; }
      to   { transform: none; opacity: 1; }
    }
    .modal-window h2 {
      margin-top: 0;
      font-size: 1.4rem;
      letter-spacing: 0.04em;
      margin-bottom: 18px;
      font-family: 'Dancing Script', cursive, sans-serif;
      text-align: center;
    }
    .modal-close {
      position: absolute;
      top: 14px; right: 18px;
      background: none;
      border: none;
      color: #fff;
      font-size: 1.3rem;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.2s;
    }
    .modal-close:hover {
      opacity: 1;
    }
    .modal-form {
      display: flex;
      flex-direction: column;
      gap: 14px;
      margin-bottom: 12px;
    }
    .modal-form label {
      font-size: 1rem;
      margin-bottom: 4px;
      opacity: 0.85;
    }
    .modal-form input[type="email"],
    .modal-form input[type="text"] {
      padding: 8px 10px;
      border-radius: 5px;
      border: 1px solid #444;
      background: #18191c;
      color: #fff;
      font-size: 1rem;
      outline: none;
      transition: border 0.2s;
    }
    .modal-form input:focus {
      border: 1.5px solid #ff5500;
    }
    .modal-form .required {
      color: #ff5252;
      margin-left: 2px;
      font-size: 1.1em;
    }
    .modal-form .error {
      color: #ff5252;
      font-size: 0.98em;
      margin-top: -8px;
      margin-bottom: 2px;
      min-height: 18px;
    }
    .modal-form button[type="submit"] {
      margin-top: 10px;
      background: #ff5500;
      color: #fff;
      border: none;
      border-radius: 5px;
      padding: 10px 0;
      font-size: 1.1rem;
      font-family: inherit;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
    }
    .modal-form button[type="submit"]:hover {
      background: #ff7733;
    }
    .modal-disclaimer {
      font-size: 0.98rem;
      color: #ccc;
      margin-top: 10px;
      text-align: center;
      line-height: 1.5;
      opacity: 0.92;
    }
    @media (max-width: 600px) {
      .modal-window {
        min-width: 0;
        padding: 18px 6vw 16px 6vw;
      }
    }
  </style>
  <!-- Google Fonts for site title (optional, for script style) -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
  <!-- Font Awesome for social icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <!-- SoundCloud Widget API -->
  <script src="https://w.soundcloud.com/player/api.js"></script>
  <style>
    /* Store button bottom left */
    #store-btn {
      position: fixed;
      left: 32px;
      bottom: 32px;
      background: #111c;
      color: #fff;
      font-family: 'Courier New', Courier, monospace;
      font-size: 1.2rem;
      padding: 8px 22px;
      border-radius: 4px;
      border: none;
      box-shadow: 0 2px 8px #0007;
      cursor: pointer;
      z-index: 20;
      letter-spacing: 0.04em;
      font-weight: bold;
      transition: background 0.2s, color 0.2s;
      text-decoration: none;
      outline: none;
    }
    #store-btn:hover {
      background: #fff;
      color: #23252a;
    }
    @media (max-width: 600px) {
      #radio-svg { width: 98vw; height: auto; }
      #store-btn { left: 10px; bottom: 10px; font-size: 1rem; padding: 6px 14px; }
      .nav-bar { padding: 12px 4vw 0 4vw; }
      .site-title { font-size: 1.2rem; }
      .nav-right {
        font-size: 1.3rem;
        gap: 0.7rem;
        padding: 4px 8px;
        margin-right: 8px;
      }
    }
  </style>
</head>
<body>
  <nav class="nav-bar">
    <div class="nav-left">
      <a href="#">subscribe</a>
    </div>
    <!-- site-title removed as per user request -->
    <div class="nav-right">
      <a href="https://instagram.com/sednafm" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
      <a href="https://soundcloud.com/sednafm" target="_blank" title="SoundCloud"><i class="fab fa-soundcloud"></i></a>
    </div>
  </nav>
  <!-- store button removed as requested -->
  <div id="radio-hero">
    <svg id="radio-svg" width="500" height="300" viewBox="0 0 500 300" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient id="radioBody" cx="50%" cy="50%" r="80%">
          <stop offset="0%" stop-color="#e6e6e6"/>
          <stop offset="100%" stop-color="#b0b0b0"/>
        </radialGradient>
        <linearGradient id="radioScreen" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="#333"/>
          <stop offset="100%" stop-color="#111"/>
        </linearGradient>
        <!-- Circular clip path for artwork -->
        <clipPath id="artwork-clip">
          <circle cx="190" cy="140" r="18"/>
        </clipPath>
      </defs>
      <rect x="20" y="60" width="460" height="180" rx="30" fill="url(#radioBody)" stroke="#888" stroke-width="4"/>
      <rect x="60" y="100" width="380" height="80" rx="15" fill="url(#radioScreen)" stroke="#888" stroke-width="2"/>
      <!-- Artwork image inside radio screen, to the left of play button -->
      <circle id="artwork-border" cx="190" cy="140" r="18" fill="none" stroke="#fff" stroke-width="4"/>
      <image id="svg-artwork" x="172" y="122" width="36" height="36" style="display:none; pointer-events:none;" clip-path="url(#artwork-clip)" />
      <ellipse cx="90" cy="190" rx="25" ry="25" fill="#bbb" stroke="#888" stroke-width="2"/>
      <ellipse cx="410" cy="190" rx="25" ry="25" fill="#bbb" stroke="#888" stroke-width="2"/>
      <rect x="230" y="200" width="40" height="20" rx="5" fill="#888"/>
      <g id="radio-play-btn-group" style="cursor:pointer;">
        <circle id="radio-play-btn" cx="250" cy="140" r="30" fill="#ff5252" stroke="#fff" stroke-width="4" style="filter: drop-shadow(0 2px 8px #0008);"/>
        <polygon id="play-icon" points="242,130 265,140 242,150" fill="#fff"/>
        <rect id="pause-icon" x="244" y="130" width="6" height="20" rx="2" fill="#fff" style="display:none;"/>
        <rect id="pause-icon2" x="254" y="130" width="6" height="20" rx="2" fill="#fff" style="display:none;"/>
      </g>
      <!-- Next button: right of play button -->
      <g id="radio-next-btn-group" style="cursor:pointer;">
        <circle id="radio-next-btn" cx="310" cy="140" r="18" fill="#888" stroke="#fff" stroke-width="3" style="filter: drop-shadow(0 2px 8px #0008);"/>
        <polygon points="305,132 320,140 305,148" fill="#fff"/>
        <polygon points="312,132 327,140 312,148" fill="#fff" opacity="0.7"/>
      </g>
    </svg>
    <div id="radio-label" style="display: flex; flex-direction: column; align-items: center;">
      Sedna FM
      <img src="sedna_logo.png" alt="Sedna FM Logo" style="margin-top: 12px; width: 60px; height: auto;">
    </div>
    <div id="soundcloud-player"></div>
  </div>
  <script>
    // Helper: Get random element from array
    function getRandom(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    // State for widget and track
    let widget = null;
    let currentTrack = null;
    let isPlaying = false;
    let tracks = null;

    // Update play/pause icon
    function updatePlayPauseIcon() {
      document.getElementById('play-icon').style.display = isPlaying ? 'none' : '';
      document.getElementById('pause-icon').style.display = isPlaying ? '' : 'none';
      document.getElementById('pause-icon2').style.display = isPlaying ? '' : 'none';
    }

    // Use a hardcoded list of Sedna FM track URLs for reliability
    function fetchSednaTracks() {
      // Add or update this list with actual Sedna FM track paths as needed
      // Real Sedna FM track URLs (update this list as needed)
      return [
        "https://soundcloud.com/sednafm/november-bomb",
        "https://soundcloud.com/sednafm/destination-sedna",
        "https://soundcloud.com/sednafm/beautiful-as-you-feel",
        "https://soundcloud.com/sednafm/queen-of-spades",
        "https://soundcloud.com/sednafm/on-the-go-zero-zero",
        "https://soundcloud.com/sednafm/morning-drops-timeless-legacy",
        "https://soundcloud.com/sednafm/morning-drops-waves-of-the-maghreb",
        "https://soundcloud.com/sednafm/morning-drops-spaceshift",
        "https://soundcloud.com/sednafm/morning-drops-bars-with-balls",
        "https://soundcloud.com/sednafm/morning-drops-electric-shock",
        "https://soundcloud.com/sednafm/morning-drops-friends-home",
        "https://soundcloud.com/sednafm/morning-drops-secret-mp3-player-1",
        "https://soundcloud.com/sednafm/alters-of-an-ego",
        "https://soundcloud.com/sednafm/morning-drops-unboxing",
        "https://soundcloud.com/sednafm/morning-drops-birthdaycake",
        "https://soundcloud.com/sednafm/morning-drops-the-one-with-many-names",
        "https://soundcloud.com/sednafm/morning-drops-mediterranean-boat",
        "https://soundcloud.com/sednafm/morning-drops-80s-club",
        "https://soundcloud.com/sednafm/morning-drops-demystifying-reggaeton",
        "https://soundcloud.com/sednafm/morning-drops-slow-planet",
        "https://soundcloud.com/sednafm/morning-drops-unfreezing",
        "https://soundcloud.com/sednafm/morning-drops-the-sound-of-tuareg",
        "https://soundcloud.com/sednafm/morning-drops-steel-city",
        "https://soundcloud.com/sednafm/morning-drops-18-sardegna",
        "https://soundcloud.com/sednafm/morning-drops-wabi-sabi"
      ];
      // For a dynamic solution, use the SoundCloud API with a client_id to fetch tracks.
      // See: https://developers.soundcloud.com/docs/api/reference#tracks
    }

    // Embed SoundCloud player for a given track URL
    function embedSoundCloud(trackUrl) {
      const playerDiv = document.getElementById('soundcloud-player');
      playerDiv.innerHTML = `
        <iframe id="sc-widget-iframe" width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay"
          src="https://w.soundcloud.com/player/?url=${encodeURIComponent(trackUrl)}&color=%23ff5500&auto_play=true&hide_related=false&show_comments=false&show_user=true&show_reposts=false&show_teaser=true">
        </iframe>
      `;
      playerDiv.style.display = 'block';

      // Wait for iframe to be in DOM, then instantiate widget
      setTimeout(() => {
        const iframe = document.getElementById('sc-widget-iframe');
        if (iframe) {
          widget = SC.Widget(iframe);
          // Listen for play/pause events to update icon
          widget.bind(SC.Widget.Events.PLAY, function() {
            isPlaying = true;
            updatePlayPauseIcon();
          });
          widget.bind(SC.Widget.Events.PAUSE, function() {
            isPlaying = false;
            updatePlayPauseIcon();
          });
          widget.bind(SC.Widget.Events.FINISH, function() {
            isPlaying = false;
            updatePlayPauseIcon();
          });
        }
      }, 200);
    }

    // Play random Sedna FM episode
    // Play a specific track by URL
    function playTrack(trackUrl) {
      if (!tracks) tracks = fetchSednaTracks();
      if (!widget || currentTrack !== trackUrl) {
        currentTrack = trackUrl;
        embedSoundCloud(trackUrl);
        setTimeout(() => {
          if (widget) widget.load(trackUrl, { auto_play: true });
        }, 500);
      } else {
        widget.play();
      }
    }

    // Play a random track
    function playRandomEpisode() {
      if (!tracks) tracks = fetchSednaTracks();
      const randomTrack = getRandom(tracks);
      playTrack(randomTrack);
    }

    // Play/pause toggle
    function togglePlayPause() {
      if (!widget) {
        playRandomEpisode();
        return;
      }
      widget.isPaused(function(paused) {
        if (paused) {
          widget.play();
        } else {
          widget.pause();
        }
      });
    }

    // Next track
    function playNextTrack() {
      if (!tracks) tracks = fetchSednaTracks();
      let nextTrack;
      if (tracks.length <= 1) {
        nextTrack = tracks[0];
      } else {
        // Find the index of the current track and go to the next one (circular)
        const idx = tracks.indexOf(currentTrack);
        if (idx === -1 || idx === tracks.length - 1) {
          nextTrack = tracks[0];
        } else {
          nextTrack = tracks[idx + 1];
        }
      }
      playTrack(nextTrack);
    }

    // Attach click handler to play/pause button
    document.getElementById('radio-play-btn-group').addEventListener('click', togglePlayPause);

    // Attach click handler to next button
    document.getElementById('radio-next-btn-group').addEventListener('click', playNextTrack);
    // Helper: update artwork image in SVG
    function updateArtwork() {
      if (widget) {
        widget.getCurrentSound(function(sound) {
          const svgImg = document.getElementById('svg-artwork');
          if (sound && sound.artwork_url) {
            // Use high-res artwork if available
            let url = sound.artwork_url.replace('-large', '-t500x500');
            svgImg.setAttributeNS('http://www.w3.org/1999/xlink', 'href', url);
            svgImg.setAttribute('href', url); // for SVG2
            svgImg.style.display = '';
          } else {
            svgImg.setAttribute('href', '');
            svgImg.style.display = 'none';
          }
        });
      }
    }

    // Update artwork when track loads/changes
    function setupArtworkListener() {
      if (widget) {
        widget.bind(SC.Widget.Events.READY, updateArtwork);
        widget.bind(SC.Widget.Events.PLAY, updateArtwork);
        widget.bind(SC.Widget.Events.LOAD_PROGRESS, updateArtwork);
      }
    }

    // Patch embedSoundCloud to call setupArtworkListener after widget is created
    const _origEmbedSoundCloud = embedSoundCloud;
    embedSoundCloud = function(trackUrl) {
      _origEmbedSoundCloud(trackUrl);
      setTimeout(setupArtworkListener, 400);
    };

    // Initialize play/pause icon on load
    updatePlayPauseIcon();
  </script>
  <!-- Subscribe Modal -->
  <div class="modal-overlay" id="subscribe-modal-overlay" tabindex="-1" aria-hidden="true">
    <div class="modal-window" role="dialog" aria-modal="true" aria-labelledby="subscribe-modal-title">
      <button class="modal-close" id="subscribe-modal-close" aria-label="Close">&times;</button>
      <h2 id="subscribe-modal-title">Subscribe to Sedna FM Updates</h2>
      <form class="modal-form" id="subscribe-form" autocomplete="off" novalidate>
        <div>
          <label for="subscribe-email">Email address <span class="required">*</span></label>
          <input type="email" id="subscribe-email" name="email" required autocomplete="email" placeholder="your@email.com" />
          <div class="error" id="email-error"></div>
        </div>
        <div>
          <label for="subscribe-name">Name</label>
          <input type="text" id="subscribe-name" name="name" autocomplete="given-name" placeholder="Name (optional)" />
        </div>
        <div>
          <label for="subscribe-surname">Surname</label>
          <input type="text" id="subscribe-surname" name="surname" autocomplete="family-name" placeholder="Surname (optional)" />
        </div>
        <button type="submit">Subscribe</button>
      </form>
      <div class="modal-disclaimer">
        By subscribing, you consent to receive updates regarding new episodes from Sedna FM. You may unsubscribe at any time by following the instructions provided in our communications.
      </div>
    </div>
  </div>
  <script>
    // Modal logic
    (function() {
      const subscribeLink = document.querySelector('.nav-left a[href="#"]');
      const modalOverlay = document.getElementById('subscribe-modal-overlay');
      const modalClose = document.getElementById('subscribe-modal-close');
      const form = document.getElementById('subscribe-form');
      const emailInput = document.getElementById('subscribe-email');
      const emailError = document.getElementById('email-error');

      // Open modal
      subscribeLink.addEventListener('click', function(e) {
        e.preventDefault();
        modalOverlay.classList.add('active');
        modalOverlay.setAttribute('aria-hidden', 'false');
        emailInput.focus();
      });

      // Close modal
      function closeModal() {
        modalOverlay.classList.remove('active');
        modalOverlay.setAttribute('aria-hidden', 'true');
        form.reset();
        emailError.textContent = '';
      }
      modalClose.addEventListener('click', closeModal);
      modalOverlay.addEventListener('click', function(e) {
        if (e.target === modalOverlay) closeModal();
      });
      document.addEventListener('keydown', function(e) {
        if (modalOverlay.classList.contains('active') && e.key === 'Escape') closeModal();
      });

      // Form validation
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        emailError.textContent = '';
        const emailVal = emailInput.value.trim();
        if (!emailVal) {
          emailError.textContent = 'Email address is required.';
          emailInput.focus();
          return;
        }
        // Simple email regex
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailPattern.test(emailVal)) {
          emailError.textContent = 'Please enter a valid email address.';
          emailInput.focus();
          return;
        }
        // Here you would handle the subscription (e.g., send to backend)
        // For now, just close modal and show a simple alert
        closeModal();
        setTimeout(() => {
          alert('Thank you for subscribing to Sedna FM updates!');
        }, 200);
      });
    })();
  </script>
</body>
</html>
